# MWork Backend

MWork ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ–ª–µ–π –∏ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π. –≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ—Ä–≤–µ—Ä–Ω—É—é —á–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –Ω–∞ Golang.

---

## üì¶ –°—Ç–µ–∫

- **–Ø–∑—ã–∫**: Go (Golang)
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Gin
- **–ë–î**: PostgreSQL
- **ORM**: GORM
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: Swagger (`/swagger/index.html`)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT access + refresh —Ç–æ–∫–µ–Ω—ã
- **–§–∞–π–ª–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: multipart/form-data
- **–ü–ª–∞—Ç–µ–∂–∏**: Robokassa
- **WebSocket**: –¥–ª—è —á–∞—Ç–æ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
cmd/              # main.go
config/           # config.yaml
database/         # –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
docs/             # Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
internal/
models/       # GORM –º–æ–¥–µ–ª–∏
handlers/     # HTTP Handlers (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)
services/     # –õ–æ–≥–∏–∫–∞
repositories/ # SQL-–ª–æ–≥–∏–∫–∞ –∏ –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
dto/          # –í—Ö–æ–¥–Ω—ã–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
auth/         # JWT-–ª–æ–≥–∏–∫–∞
middlewares/  # Middleware (auth –∏ –¥—Ä.)
routes/       # –†–æ—É—Ç–∏–Ω–≥ –ø–æ —Ä–æ–ª—è–º
utils/        # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
ws/               # WebSocket-–º–µ–Ω–µ–¥–∂–µ—Ä


## üöÄ –°–±–æ—Ä–∫–∞ –ü—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä—É–π –ø—Ä–æ–µ–∫—Ç –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
go mod tidy
```

### 2. –ü—Ä–æ–≥–æ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
go run database/migrate.go
```

### 3. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä

```bash
go run cmd/web/main.go
```
### 4. –ù–∞—Å—Ç—Ä–æ–π `config.yaml –∏–ª–∏ —Å–æ–∑–¥–∞–π .env


---
## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: `POST /auth/register`
- **–õ–æ–≥–∏–Ω**: `POST /auth/login` ‚Üí `access_token + refresh_token`
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞**: `POST /auth/refresh`
- **Logout**: `POST /auth/logout`

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Bearer access_token` –¥–ª—è –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.


##  –û—Å–Ω–æ–≤–Ω—ã–µ —Ä—É—á–∫–∏ –∏–ª–∏ –ø—É—Ç–∏

| –§—É–Ω–∫—Ü–∏—è                     | –ú–µ—Ç–æ–¥ –∏ –ø—É—Ç—å                      |
|----------------------------|-----------------------------------|
| –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏            | `POST /model-profiles`           |
| –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –º–æ–¥–µ–ª–∏   | `GET /model-profiles/{user_id}`  |
| –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è      | `POST /employer-profiles`        |
| –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –†–ö       | `GET /employer-profiles/{user_id}` |
| –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –º–æ–¥–µ–ª–∏ | `GET /analytics/model`           |
| –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–∏–Ω–≥–∞          | `POST /castings` *(–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)* |
| –û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –∫–∞—Å—Ç–∏–Ω–≥–∏        | `POST /responses`                |
| –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∫–ª–∏–∫–æ–≤         | `GET /responses?casting_id=...`  |
| –ß–∞—Ç                        | `POST /chat/messages/send`, WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| –ü–æ–¥–ø–∏—Å–∫–∏                   | `POST /subscriptions`, `GET /subscriptions/plans` |
| –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤            | `POST /upload` (—Å `entityType`, `entityId`, `usage`) |

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–º–æ—Ç—Ä–∏ –≤ Swagger –Ω–∏–∂–µ.

---

##  Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- Swagger UI: [http://localhost:4000/swagger/index.html](http://localhost:4000/swagger/index.html)
- OpenAPI JSON: [http://localhost:4000/swagger/doc.json](http://localhost:4000/swagger/doc.json)

–ú–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Postman –Ω–∞–ø—Ä—è–º—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–ª–ª–µ–∫—Ü–∏—é (—Å–º. –Ω–∏–∂–µ).

---

## üÖøÔ∏è Postman

–ì–æ—Ç–æ–≤–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ä—É—á–∫–∞–º–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ:
```
mwork_api_detailed_postman_collection.json
```

- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç auth
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `{{token}}`
- –í–∫–ª—é—á–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ª–æ–≥–∏–Ω–∞, —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π, –æ—Ç–∫–ª–∏–∫–æ–≤, —á–∞—Ç–æ–≤ –∏ –ø—Ä.

---
## –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚Äî –±–∞–∑–æ–≤–∞—è
- [ ] –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ–±—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É `ErrorResponse`
- [ ] –¢–µ—Å—Ç—ã –∏ –ª–æ–≥–≥–µ—Ä ‚Äî –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- [ ] Swagger –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é (`swag init` –≤ `docs/`)
- [ ] –ù–µ—Ç UI –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ ‚Äî —Ç–æ–ª—å–∫–æ API
- [ ] –ë–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞ –Ω–µ –¥–æ –∫–æ–Ω—Ü–∞ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω–∞

## –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ –¢–ó)

| –ú–æ–¥—É–ª—å                 | –°—Ç–∞—Ç—É—Å    |
|------------------------|-----------|
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ª–æ–≥–∏–Ω      | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ú–æ–¥–µ–ª—å/–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å    | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ö–∞—Å—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∫–ª–∏–∫–∏     | ‚úÖ MVP    |
| –ß–∞—Ç –∏ –≤–ª–æ–∂–µ–Ω–∏—è         | ‚úÖ MVP    |
| –ü–æ–¥–ø–∏—Å–∫–∏ –∏ Robokassa   | ‚úÖ MVP    |
| –ê–¥–º–∏–Ω–∫–∞                | ‚ö†Ô∏è API-–±–∞–∑–∞ –µ—Å—Ç—å |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞              | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è      | ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –±–∞–∑–∞ |
| –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ     | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| Swagger + Postman      | ‚úÖ –í –∫–æ–º–ø–ª–µ–∫—Ç–µ |

---

## üßæ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.

---

**–ö–æ–Ω—Ç–∞–∫—Ç**: support@company.com  
**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫**: https://github.com/KuanyshMaral
**–ü—Ä–æ–µ–∫—Ç**: MWork (v1.0)

---
# –ü–æ–ª–µ–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
## gowebsocket

[RFC 6455](https://datatracker.ietf.org/doc/html/rfc6455)

[Gorilla](https://github.com/gorilla/websocket)

---